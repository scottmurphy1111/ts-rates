// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Ratesheet {
  id               String         @id @default(uuid())
  name             String         @unique
  title            String
  subtitle         String
  rows             Row[]
  options          Option[]
  disclosuresSetId String
  disclosuresSet   DisclosuresSet @relation(fields: [disclosuresSetId], references: [id])
  coveragesSetId   String
  coveragesSet     CoveragesSet   @relation(fields: [coveragesSetId], references: [id])

  @@index(name)
}

model Row {
  id                 String    @id @default(uuid())
  termValue          String
  termUnit           String
  mileageValue       String
  costNewerLowMiles  String
  costNewerHighMiles String
  costOlderLowMiles  String
  costOlderHighMiles String
  deductible         String
  aggregateLimit     String
  ratesheetId        String
  ratesheet          Ratesheet @relation(fields: [ratesheetId], references: [id])
}

model Option {
  id          String    @id @default(uuid())
  packageName String
  termValue   String
  termUnit    String
  cost        String
  ratesheetId String
  ratesheet   Ratesheet @relation(fields: [ratesheetId], references: [id])
}

model DisclosuresSet {
  id          String       @id @default(uuid())
  name        String
  disclosures Disclosure[]
  ratesheet   Ratesheet[]
}

model Disclosure {
  id               String         @id @default(uuid())
  title            String
  description      String
  order            String
  disclosuresSetId String
  disclosuresSet   DisclosuresSet @relation(fields: [disclosuresSetId], references: [id])
}

model CoveragesSet {
  id        String      @id @default(uuid())
  name      String
  coverages Coverage[]
  ratesheet Ratesheet[]
}

model Coverage {
  id             String       @id @default(uuid())
  title          String
  description    String
  order          String
  coveragesSetId String
  coveragesSet   CoveragesSet @relation(fields: [coveragesSetId], references: [id])
}
