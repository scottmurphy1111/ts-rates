// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Ratesheet {
  id               String               @id @default(uuid())
  name             String               @unique
  title            String
  subtitle         String
  rows             Row[]
  options          Option[]
  disclosuresSetId String
  disclosuresSet   DisclosuresSet       @relation(fields: [disclosuresSetId], references: [id])
  coverages        RatesheetCoverages[]

  @@index(name)
}

model Row {
  id                 String    @id @default(uuid())
  termValue          String
  termUnit           String
  mileageValue       String
  costNewerLowMiles  String
  costNewerHighMiles String
  costOlderLowMiles  String
  costOlderHighMiles String
  deductible         String
  aggregateLimit     String
  ratesheetId        String
  ratesheet          Ratesheet @relation(fields: [ratesheetId], references: [id])
}

model Option {
  id              String         @id @default(uuid())
  package         OptionPackage? @relation(fields: [optionPackageId], references: [id])
  details         OptionDetails? @relation(fields: [optionDetailsId], references: [id])
  ratesheetId     String
  ratesheet       Ratesheet      @relation(fields: [ratesheetId], references: [id])
  optionPackageId String?        @unique
  optionDetailsId String?        @unique
}

model OptionPackage {
  id     String  @id @default(uuid())
  name   String
  option Option?
}

model OptionDetails {
  id        String  @id @default(uuid())
  termValue String
  termUnit  String
  cost      String
  option    Option?
}

model DisclosuresSet {
  id          String       @id @default(uuid())
  title       String
  disclosures Disclosure[]
  ratesheet   Ratesheet[]
}

model Disclosure {
  id               String         @id @default(uuid())
  title            String
  description      String
  order            String
  disclosuresSetId String
  disclosuresSet   DisclosuresSet @relation(fields: [disclosuresSetId], references: [id])
}

model RatesheetCoverages {
  id          String    @id @default(uuid())
  title       String
  description String
  ratesheetId String
  ratesheet   Ratesheet @relation(fields: [ratesheetId], references: [id])
}
