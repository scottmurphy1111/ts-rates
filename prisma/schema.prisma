// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Ratesheet {
  id          String                 @id @default(uuid())
  name        String                 @unique
  title       String
  rows        Row[]
  options     Option[]
  disclosures RatesheetDisclosures[]
  coverages   RatesheetCoverages[]

  @@index(name)
}

model Row {
  id                 String    @id @default(uuid())
  termValue          String
  termUnit           String
  mileageValue       String
  costNewerLowMiles  String
  costNewerHighMiles String
  costOlderLowMiles  String
  costOlderHighMiles String
  deductible         String
  aggregateLimit     String
  ratesheetId        String
  ratesheet          Ratesheet @relation(fields: [ratesheetId], references: [id])
}

model Option {
  id          String          @id @default(uuid())
  package     String
  details     OptionDetails[]
  ratesheetId String
  ratesheet   Ratesheet       @relation(fields: [ratesheetId], references: [id])
}

model OptionDetails {
  id        String @id @default(uuid())
  termValue String
  termUnit  String
  cost      String
  optionId  String
  option    Option @relation(fields: [optionId], references: [id])
}

model RatesheetDisclosures {
  id          String    @id @default(uuid())
  title       String
  description String
  ratesheetId String
  ratesheet   Ratesheet @relation(fields: [ratesheetId], references: [id])
}

model RatesheetCoverages {
  id          String    @id @default(uuid())
  title       String
  description String
  ratesheetId String
  ratesheet   Ratesheet @relation(fields: [ratesheetId], references: [id])
}
